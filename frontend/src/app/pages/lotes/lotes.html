<div class="lotes-container">

  <div class="header">
    <h2>Lotes — Ingreso</h2>
    <button class="btn-primary" (click)="abrirModal()">+ Nuevo Lote</button>
  </div>

  <div class="alert-success" *ngIf="mensajeExito">
    {{ mensajeExito }}
  </div>

  <div class="tabla-wrapper" *ngIf="lotes.length > 0; else emptyState">

    <table class="tabla-lotes">
      <thead>
        <tr>
          <th>Código</th>
          <th>Fecha Compra</th>
          <th>Proveedor</th>
          <th>Kg Baba</th>
          <th>Kg Segunda</th>
          <th>Estado</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let lote of lotes">
          <td>{{ lote.codigo }}</td>
          <td>{{ lote.fecha_compra | date:'dd/MM/yyyy' }}</td>
          <td>{{ lote.proveedor_nombre }}</td>
          <td>{{ lote.kg_baba_compra }}</td>
          <td>{{ lote.kg_segunda }}</td>
          <td>
            <span class="badge" [ngClass]="lote.estado">
              {{ lote.estado }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

  <ng-template #emptyState>
    <div class="empty">
      No hay lotes pendientes por enviar a fermentación.
    </div>
  </ng-template>

</div>

<!-- MODAL -->

<div class="modal-backdrop" *ngIf="mostrarModal">
  <div class="modal">

    <h3>Registrar Nuevo Lote</h3>

    <label>Código</label>
    <input type="text" [(ngModel)]="nuevoLote.codigo">

    <label>Fecha de Compra</label>
    <input type="date" [(ngModel)]="nuevoLote.fecha_compra">

    <label>Proveedor</label>
    <input type="text" [(ngModel)]="nuevoLote.proveedor_nombre">

    <label>Kg Baba Compra</label>
    <input type="number" [(ngModel)]="nuevoLote.kg_baba_compra">

    <label>Kg Segunda</label>
    <input type="number" [(ngModel)]="nuevoLote.kg_segunda">

    <div class="modal-actions">
      <button class="btn-cancel" (click)="cerrarModal()">Cancelar</button>
      <button class="btn-primary" (click)="guardar()">Guardar</button>
    </div>

  </div>
</div>